(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{1038:function(e,t,n){var content=n(1110);content.__esModule&&(content=content.default),"string"==typeof content&&(content=[[e.i,content,""]]),content.locals&&(e.exports=content.locals);(0,n(67).default)("047af4d0",content,!0,{sourceMap:!1})},1108:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"CreateSpotlight"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spotlight"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SpotlightCreateInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"createSpotlight"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spotlight"},value:{kind:"Variable",name:{kind:"Name",value:"spotlight"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation CreateSpotlight($spotlight: SpotlightCreateInput!) {\n  createSpotlight(spotlight: $spotlight) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}var l={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),l[e.name.value]=t}})),e.exports=n,e.exports.CreateSpotlight=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=l[t]||new Set,r=new Set,c=new Set;for(o.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){r.has(e)||(r.add(e),(l[e]||new Set).forEach((function(e){c.add(e)})))}))}return r.forEach((function(t){var o=d(e,t);o&&n.definitions.push(o)})),n}(n,"CreateSpotlight")},1109:function(e,t,n){"use strict";n(1038)},1110:function(e,t,n){var o=n(66)(!1);o.push([e.i,".SpotlightCreationFormInput>*[data-v-f1aea89e]{margin-top:var(--spacing-12)}",""]),e.exports=o},951:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"query",name:{kind:"Name",value:"GetProductDetailsById"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"id"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"versionId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"String"}}},directives:[]},{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"productId"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"ID"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",alias:{kind:"Name",value:"productDetails"},name:{kind:"Name",value:"apiById"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headlines"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"index"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]}]}},{kind:"Field",name:{kind:"Name",value:"followersCount"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"websiteUrl"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"terms"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"text"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"name"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}},{kind:"Field",name:{kind:"Name",value:"spotlights"},arguments:[{kind:"Argument",name:{kind:"Name",value:"where"},value:{kind:"ObjectValue",fields:[{kind:"ObjectField",name:{kind:"Name",value:"apiId"},value:{kind:"Variable",name:{kind:"Name",value:"productId"}}}]}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"nodes"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"title"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"description"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"thumbnailURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"spotlightURL"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"slugifiedName"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"status"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"weight"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"published"},arguments:[],directives:[]}]}}]}},{kind:"Field",alias:{kind:"Name",value:"reference"},name:{kind:"Name",value:"apiReferenceByApiAndVersionId"},arguments:[{kind:"Argument",name:{kind:"Name",value:"apiId"},value:{kind:"Variable",name:{kind:"Name",value:"id"}}},{kind:"Argument",name:{kind:"Name",value:"versionId"},value:{kind:"Variable",name:{kind:"Name",value:"versionId"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"videoId"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"headline"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"features"},arguments:[],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"heading"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"caption"},arguments:[],directives:[]},{kind:"Field",name:{kind:"Name",value:"image"},arguments:[],directives:[]}]}}]}}]}}],loc:{start:0,end:903}};n.loc.source={body:"# TODO: productId & Id are the same.\n# Id should use the type ID instead of string. However some queries are still being refactored at the moment.\n# Moving forward, it will be consolidated to a single ID with type ID.\nquery GetProductDetailsById(\n  $id: String!\n  $versionId: String!\n  $productId: ID!\n) {\n  productDetails: apiById(apiId: $id) {\n    name\n    headlines {\n      id\n      text\n      index\n      title\n    }\n    followersCount\n    websiteUrl\n    terms {\n      text\n      name\n      id\n    }\n  }\n  spotlights(where: { apiId: $productId }) {\n    nodes {\n      id\n      title\n      description\n      thumbnailURL\n      spotlightURL\n      slugifiedName\n      status\n      weight\n      published\n    }\n  }\n  reference: apiReferenceByApiAndVersionId(apiId: $id, versionId: $versionId) {\n    id\n    image\n    videoId\n    headline\n    features {\n      heading\n      caption\n      image\n    }\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}var l={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),l[e.name.value]=t}})),e.exports=n,e.exports.GetProductDetailsById=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=l[t]||new Set,r=new Set,c=new Set;for(o.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){r.has(e)||(r.add(e),(l[e]||new Set).forEach((function(e){c.add(e)})))}))}return r.forEach((function(t){var o=d(e,t);o&&n.definitions.push(o)})),n}(n,"GetProductDetailsById")},976:function(e,t){var n={kind:"Document",definitions:[{kind:"OperationDefinition",operation:"mutation",name:{kind:"Name",value:"UpdateSpotlight"},variableDefinitions:[{kind:"VariableDefinition",variable:{kind:"Variable",name:{kind:"Name",value:"spotlight"}},type:{kind:"NonNullType",type:{kind:"NamedType",name:{kind:"Name",value:"SpotlightUpdateInput"}}},directives:[]}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"updateSpotlight"},arguments:[{kind:"Argument",name:{kind:"Name",value:"spotlight"},value:{kind:"Variable",name:{kind:"Name",value:"spotlight"}}}],directives:[],selectionSet:{kind:"SelectionSet",selections:[{kind:"Field",name:{kind:"Name",value:"id"},arguments:[],directives:[]}]}}]}}],loc:{start:0,end:118}};n.loc.source={body:"mutation UpdateSpotlight($spotlight: SpotlightUpdateInput!) {\n  updateSpotlight(spotlight: $spotlight) {\n    id\n  }\n}\n",name:"GraphQL request",locationOffset:{line:1,column:1}};function o(e,t){if("FragmentSpread"===e.kind)t.add(e.name.value);else if("VariableDefinition"===e.kind){var n=e.type;"NamedType"===n.kind&&t.add(n.name.value)}e.selectionSet&&e.selectionSet.selections.forEach((function(e){o(e,t)})),e.variableDefinitions&&e.variableDefinitions.forEach((function(e){o(e,t)})),e.definitions&&e.definitions.forEach((function(e){o(e,t)}))}var l={};function d(e,t){for(var i=0;i<e.definitions.length;i++){var element=e.definitions[i];if(element.name&&element.name.value==t)return element}}n.definitions.forEach((function(e){if(e.name){var t=new Set;o(e,t),l[e.name.value]=t}})),e.exports=n,e.exports.UpdateSpotlight=function(e,t){var n={kind:e.kind,definitions:[d(e,t)]};e.hasOwnProperty("loc")&&(n.loc=e.loc);var o=l[t]||new Set,r=new Set,c=new Set;for(o.forEach((function(e){c.add(e)}));c.size>0;){var m=c;c=new Set,m.forEach((function(e){r.has(e)||(r.add(e),(l[e]||new Set).forEach((function(e){c.add(e)})))}))}return r.forEach((function(t){var o=d(e,t);o&&n.definitions.push(o)})),n}(n,"UpdateSpotlight")},986:function(e,t,n){"use strict";n.r(t);n(18),n(17),n(15),n(19),n(16),n(20);var o=n(33),l=n(3),d=(n(82),n(12),n(32),n(56),n(117),n(129),n(345),n(130),n(77),n(951)),r=n.n(d),c=n(1108),m=n.n(c),f=n(976),v=n.n(f);function h(object,e){var t=Object.keys(object);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(object);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(object,e).enumerable}))),t.push.apply(t,n)}return t}function k(e){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?h(Object(source),!0).forEach((function(t){Object(l.a)(e,t,source[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(source)):h(Object(source)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(source,t))}))}return e}var S={data:function(){return{spotlightData:k({},this.defaultSpotlightData),inputValidation:{spotlightURL:!1,file:!1}}},props:{show:Boolean,mode:String,productId:String,productVersionId:String,originalSpotlight:Object,defaultSpotlightData:{type:Object,default:function(){return{type:"link",title:"",description:"",spotlightURL:"",published:!1,file:null}}}},methods:{onModalHide:function(){this.$emit("update:show",!1)},onPressSave:function(e){var t=this;return Object(o.a)(regeneratorRuntime.mark((function n(){return regeneratorRuntime.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:if(t.inputValidation.spotlightURL||t.inputValidation.file){n.next=3;break}return alert(t.$t("SpotlightCreationForm.requiredFieldsWarning")),n.abrupt("return",e.preventDefault());case 3:return"link"===t.spotlightData.type?delete t.spotlightData.file:delete t.spotlightData.spotlightURL,n.next=6,t.$apollo.mutate({mutation:"create"===t.mode?m.a:v.a,errorPolicy:"all",variables:{spotlight:k(k({apiId:t.productId},t.spotlightData),{},{weight:1})},context:{hasUpload:!!t.spotlightData.file},refetchQueries:t.spotlightsEditingRefetchQueries}).finally((function(){t.spotlightData=t.defaultSpotlightData}));case 6:case"end":return n.stop()}}),n)})))()}},watch:{show:function(e){e?this.$refs["spotlight-creation-modal"].show():this.$refs["spotlight-creation-modal"].hide()},originalSpotlight:{deep:!0,immidiate:!0,handler:function(e){this.spotlightData=k(k({},this.spotlightData),e)}}},computed:{modalTitle:function(){return"create"==this.mode?this.$t("SpotlightCreationForm.titles.create"):"update"==this.mode?this.$t("SpotlightCreationForm.titles.update"):"---"},spotlightsEditingRefetchQueries:function(){return[{query:r.a,variables:{id:this.productId,versionId:this.productVersionId,productId:this.productId}}]},validateFile:function(){if(!this.spotlightData.file||!this.spotlightData.file.type)return null;var e=this.$configs.allowedExtensions&&this.$configs.allowedExtensions.split(","),t=this.spotlightData.file.type.split("/")[1],n=e.includes(t),o=this.spotlightData.file.size/1024/1024<Number(this.$configs.allowedSizeMB)&&n;return this.inputValidation.file=o,o},validateUrl:function(){if(!this.spotlightData.spotlightURL)return null;var e=!!new RegExp("^(https?:\\/\\/)?((([a-z\\d]([a-z\\d-]*[a-z\\d])*)\\.)+[a-z]{2,}|((\\d{1,3}\\.){3}\\d{1,3}))(\\:\\d+)?(\\/[-a-z\\d%_.~+]*)*(\\?[;&a-z\\d%_.~+=-]*)?(\\#[-a-z\\d_]*)?$","i").test(this.spotlightData.spotlightURL);return this.inputValidation.spotlightURL=e,e}}},N=(n(1109),n(53)),component=Object(N.a)(S,(function(){var e=this,t=e.$createElement,n=e._self._c||t;return n("div",[n("b-modal",{ref:"spotlight-creation-modal",staticClass:"SpotlightCreationForm",attrs:{title:e.modalTitle,"ok-title":e.$t("SpotlightCreationForm.modalOkLabel"),"cancel-title":e.$t("SpotlightCreationForm.modalCancelLabel")},on:{hidden:e.onModalHide,ok:e.onPressSave}},[n("b-form",{staticClass:"SpotlightCreationFormInput"},[n("r-segmented-control",{attrs:{options:[{label:e.$t("SpotlightCreationForm.typeOptions.link"),value:"link"},{label:e.$t("SpotlightCreationForm.typeOptions.file"),value:"file_pdf"}],"full-width":""},model:{value:e.spotlightData.type,callback:function(t){e.$set(e.spotlightData,"type",t)},expression:"spotlightData.type"}}),e._v(" "),"link"===e.spotlightData.type?n("b-form",[n("b-form-input",{attrs:{placeholder:e.$t("SpotlightCreationForm.inputLabels.spotlightURL"),size:"sm",required:"",state:e.validateUrl,type:"url"},on:{blur:function(t){e.inputValidation.spotlightURL=!0}},model:{value:e.spotlightData.spotlightURL,callback:function(t){e.$set(e.spotlightData,"spotlightURL",t)},expression:"spotlightData.spotlightURL"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                    "+e._s(e.$t("SpotlightCreationForm.urlErrorMessage"))+" \n                ")])],1):n("b-form",[n("b-form-file",{attrs:{id:"file-small",size:"sm",required:"",state:e.validateFile,accept:e.$configs.allowedExtensions},model:{value:e.spotlightData.file,callback:function(t){e.$set(e.spotlightData,"file",t)},expression:"spotlightData.file"}}),e._v(" "),n("b-form-invalid-feedback",{attrs:{id:"input-live-feedback"}},[e._v("\n                    "+e._s(e.$t("SpotlightCreationForm.filEerrorMessage"))+" \n                    "),n("br"),e._v("\n                    "+e._s(e.$t("SpotlightCreationForm.fileExtensionFeedback",{extension:e.$configs.allowedExtensions}))+" \n                    "+e._s(e.$t("SpotlightCreationForm.fileSizeFeedback",{size:e.$configs.allowedSizeMB}))+" \n                ")])],1),e._v(" "),n("b-form-input",{attrs:{placeholder:e.$t("SpotlightCreationForm.inputLabels.title"),size:"sm",state:e.spotlightData.title.length>0||null},model:{value:e.spotlightData.title,callback:function(t){e.$set(e.spotlightData,"title",t)},expression:"spotlightData.title"}}),e._v(" "),n("b-form-input",{attrs:{placeholder:e.$t("SpotlightCreationForm.inputLabels.description"),size:"sm",state:e.spotlightData.description.length>0||null},model:{value:e.spotlightData.description,callback:function(t){e.$set(e.spotlightData,"description",t)},expression:"spotlightData.description"}}),e._v(" "),n("b-form-checkbox",{attrs:{name:"published",switch:""},model:{value:e.spotlightData.published,callback:function(t){e.$set(e.spotlightData,"published",t)},expression:"spotlightData.published"}},[e._v(e._s(e.$t("SpotlightCreationForm.inputLabels.published")))])],1)],1)],1)}),[],!1,null,"f1aea89e",null);t.default=component.exports;installComponents(component,{RSegmentedControl:n(895).default})}}]);